<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'&gt;&lt;text y='.9em' font-size='90'&gt;ğŸ§¿&lt;/text&gt;&lt;/svg&gt;">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FAIRY-DESK - ä¸‰è”å±é¢„è§ˆ</title>
  <link rel="stylesheet" href="/static/css/theme.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      min-height: 100vh;
      background: #0a0a0f;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    /* é¡¶éƒ¨æ ‡é¢˜åŒº */
    .header {
      padding: 30px 40px 20px;
      text-align: center;
      width: 100%;
    }

    .preview-title {
      color: #00f0ff;
      font-size: 20px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 6px;
      text-shadow: 0 0 30px rgba(0, 240, 255, 0.5);
    }

    .preview-subtitle {
      color: #6b7280;
      font-size: 11px;
      letter-spacing: 3px;
      margin-top: 8px;
    }

    /* ä¸‰è”å±é¢„è§ˆåŒº - å¹³é“ºå¸ƒå±€ */
    .preview-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      gap: 12px;
      width: 100%;
      max-width: 1600px;
    }

    /* å•ä¸ªæ˜¾ç¤ºå™¨é¢„è§ˆ */
    .monitor-preview {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* æ˜¾ç¤ºå™¨å¤–æ¡† - ä»¿çœŸæ˜¾ç¤ºå™¨è¾¹æ¡† */
    .monitor-frame {
      background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
      border-radius: 6px;
      padding: 6px 6px 20px 6px;
      box-shadow:
        0 8px 32px rgba(0, 0, 0, 0.5),
        0 0 0 1px rgba(255, 255, 255, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
      position: relative;
    }

    /* å±å¹•å®¹å™¨ */
    .monitor-screen {
      background: #000;
      border-radius: 3px;
      overflow: hidden;
      position: relative;
    }

    /* å·¦å³å±å°ºå¯¸ - 16:9 æ¯”ä¾‹ */
    .monitor-preview.side .monitor-screen {
      width: 384px;   /* 16:9 @ 384x216 */
      height: 216px;
    }

    /* ä¸­å±ç¨å¤§ */
    .monitor-preview.center .monitor-screen {
      width: 480px;   /* 16:9 @ 480x270 */
      height: 270px;
    }

    .monitor-preview.center .monitor-frame {
      box-shadow:
        0 12px 40px rgba(0, 0, 0, 0.6),
        0 0 40px rgba(0, 240, 255, 0.08),
        0 0 0 1px rgba(255, 255, 255, 0.1);
    }

    /* iframe ç¼©æ”¾æ˜¾ç¤ºå®é™…å†…å®¹ */
    .monitor-screen iframe {
      width: 1920px;
      height: 1080px;
      border: none;
      transform-origin: top left;
    }

    .monitor-preview.side .monitor-screen iframe {
      transform: scale(0.2);  /* 384/1920 = 0.2 */
    }

    .monitor-preview.center .monitor-screen iframe {
      transform: scale(0.25); /* 480/1920 = 0.25 */
    }

    /* LED æŒ‡ç¤ºç¯ */
    .monitor-led {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 5px;
      height: 5px;
      background: #00f0ff;
      border-radius: 50%;
      box-shadow: 0 0 6px #00f0ff;
      animation: led-blink 2s ease-in-out infinite;
    }

    @keyframes led-blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* æ˜¾ç¤ºå™¨æ”¯æ¶ */
    .monitor-stand {
      width: 30px;
      height: 20px;
      background: linear-gradient(180deg, #252525 0%, #1a1a1a 100%);
      clip-path: polygon(15% 0%, 85% 0%, 100% 100%, 0% 100%);
    }

    .monitor-base {
      width: 60px;
      height: 6px;
      background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
      border-radius: 3px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    /* æ˜¾ç¤ºå™¨æ ‡ç­¾ */
    .monitor-label {
      margin-top: 12px;
      color: #6b7280;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    /* æ‚¬åœå…¨å±æŒ‰é’® */
    .fullscreen-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.2s ease;
      cursor: pointer;
    }

    .monitor-screen:hover .fullscreen-overlay {
      opacity: 1;
    }

    .fullscreen-btn {
      background: rgba(0, 240, 255, 0.2);
      border: 1px solid #00f0ff;
      color: #00f0ff;
      padding: 10px 20px;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }

    .fullscreen-btn:hover {
      background: #00f0ff;
      color: #0a0a0f;
    }

    /* åŠ è½½çŠ¶æ€ */
    .monitor-loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0a0e17;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 10px;
      z-index: 10;
    }

    .monitor-loading.hidden {
      display: none;
    }

    .loading-spinner {
      width: 24px;
      height: 24px;
      border: 2px solid rgba(0, 240, 255, 0.2);
      border-top-color: #00f0ff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-text {
      color: #6b7280;
      font-size: 11px;
    }

    /* åº•éƒ¨æ§åˆ¶æ  */
    .controls {
      padding: 20px 40px 30px;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .controls button {
      background: #1f2937;
      border: 1px solid #374151;
      color: #9ca3af;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s;
    }

    .controls button:hover {
      border-color: #00f0ff;
      color: #00f0ff;
    }

    .controls button.primary {
      background: #00f0ff;
      border-color: #00f0ff;
      color: #0a0a0f;
      font-weight: 500;
    }

    .controls button.primary:hover {
      background: #00d4e0;
    }

    .hint {
      color: #4b5563;
      font-size: 11px;
      margin-left: 20px;
    }

    /* å“åº”å¼è°ƒæ•´ */
    @media (max-width: 1400px) {
      .monitor-preview.side .monitor-screen {
        width: 320px;
        height: 180px;
      }
      .monitor-preview.side .monitor-screen iframe {
        transform: scale(0.1667);
      }
      .monitor-preview.center .monitor-screen {
        width: 400px;
        height: 225px;
      }
      .monitor-preview.center .monitor-screen iframe {
        transform: scale(0.2083);
      }
    }

    @media (max-width: 1100px) {
      .preview-container {
        flex-direction: column;
        gap: 20px;
      }
      .monitor-preview.side .monitor-screen,
      .monitor-preview.center .monitor-screen {
        width: 480px;
        height: 270px;
      }
      .monitor-preview.side .monitor-screen iframe,
      .monitor-preview.center .monitor-screen iframe {
        transform: scale(0.25);
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <h1 class="preview-title">ğŸ§¿ FAIRY-DESK</h1>
    <p class="preview-subtitle">ä¸‰è”å±é¢„è§ˆæ¨¡å¼ Â· Triple Monitor Preview</p>
  </div>

  <div class="preview-container">
    <!-- å·¦å± -->
    <div class="monitor-preview side">
      <div class="monitor-frame">
        <div class="monitor-screen">
          <div class="monitor-loading" id="loading-left">
            <div class="loading-spinner"></div>
            <span class="loading-text">æ€åŠ¿ç›‘æ§åŠ è½½ä¸­...</span>
          </div>
          <iframe src="/left" onload="hideLoading('left')"></iframe>
          <div class="fullscreen-overlay" onclick="openFullscreen('/left')">
            <button class="fullscreen-btn">â›¶ æ‰“å¼€å…¨å±</button>
          </div>
        </div>
        <div class="monitor-led"></div>
      </div>
      <div class="monitor-stand"></div>
      <div class="monitor-base"></div>
      <div class="monitor-label">å·¦å± Â· æ€åŠ¿ç›‘æ§</div>
    </div>

    <!-- ä¸­å± -->
    <div class="monitor-preview center">
      <div class="monitor-frame">
        <div class="monitor-screen">
          <div class="monitor-loading" id="loading-center">
            <div class="loading-spinner"></div>
            <span class="loading-text">æ§åˆ¶å°åŠ è½½ä¸­...</span>
          </div>
          <iframe src="/center" onload="hideLoading('center')"></iframe>
          <div class="fullscreen-overlay" onclick="openFullscreen('/center')">
            <button class="fullscreen-btn">â›¶ æ‰“å¼€å…¨å±</button>
          </div>
        </div>
        <div class="monitor-led"></div>
      </div>
      <div class="monitor-stand"></div>
      <div class="monitor-base"></div>
      <div class="monitor-label">ä¸­å± Â· æ§åˆ¶å°</div>
    </div>

    <!-- å³å± -->
    <div class="monitor-preview side">
      <div class="monitor-frame">
        <div class="monitor-screen">
          <div class="monitor-loading" id="loading-right">
            <div class="loading-spinner"></div>
            <span class="loading-text">æƒ…æŠ¥è§†çª—åŠ è½½ä¸­...</span>
          </div>
          <iframe src="/right" onload="hideLoading('right')"></iframe>
          <div class="fullscreen-overlay" onclick="openFullscreen('/right')">
            <button class="fullscreen-btn">â›¶ æ‰“å¼€å…¨å±</button>
          </div>
        </div>
        <div class="monitor-led"></div>
      </div>
      <div class="monitor-stand"></div>
      <div class="monitor-base"></div>
      <div class="monitor-label">å³å± Â· æƒ…æŠ¥è§†çª—</div>
    </div>
  </div>

  <div class="controls">
    <button onclick="refreshAll()">ğŸ”„ åˆ·æ–°</button>
    <button onclick="location.href='/settings'">âš™ï¸ è®¾ç½®</button>
    <button class="primary" onclick="openAllWindows()">ğŸ–¥ï¸ å¼€å¯ä¸‰çª—å£æ¨¡å¼</button>
    <span class="hint">å°†ä¸‰ä¸ªçª—å£åˆ†åˆ«æ‹–åˆ°ä¸‰å°æ˜¾ç¤ºå™¨å³å¯ä½¿ç”¨</span>
  </div>

  <script>
    function hideLoading(screen) {
      const el = document.getElementById('loading-' + screen);
      if (el) {
        setTimeout(() => el.classList.add('hidden'), 300);
      }
    }

    function openFullscreen(path) {
      window.open(path, '_blank', 'width=1920,height=1080');
    }

    function openAllWindows() {
      // è®¡ç®—çª—å£ä½ç½®ï¼Œå°è¯•åˆ†å¸ƒåˆ°å¤šå±
      const w = 960, h = 600;
      window.open('/left', 'fairy-left', `width=${w},height=${h},left=0,top=50`);
      setTimeout(() => {
        window.open('/center', 'fairy-center', `width=${w},height=${h},left=${w + 10},top=50`);
      }, 100);
      setTimeout(() => {
        window.open('/right', 'fairy-right', `width=${w},height=${h},left=${(w + 10) * 2},top=50`);
      }, 200);
    }

    function refreshAll() {
      document.querySelectorAll('.monitor-screen iframe').forEach((iframe, i) => {
        const loading = document.getElementById('loading-' + ['left', 'center', 'right'][i]);
        if (loading) loading.classList.remove('hidden');
        iframe.src = iframe.src;
      });
    }
  </script>
</body>
</html>
